# shell-bot

Это полнофункциональный shellrunner в виде [Telegram бота][]. Вы сообщаете боту
команду, он выполняет ее и отправляет вывод в реальном времени. Вы можете отправить ввод в
команду, отвечая на сообщение с командой.

Бот также позволяет загружать или скачивать файлы, а также
имеет простой текстовый редактор для удобства.

Вот пример запуска команды `git` для клонирования репозитория:

![Basic tasks](http://i.imgur.com/Xxtoe4G.png)

Вот пример запуска команды alsamixer:

![Alsamixer with keypad](http://i.imgur.com/j8aXFLd.png)

Этот бот демонстрирует большую часть [Botgram][] API.

**Заметка:** Из-за тесной интеграции запуск этого бота в Windows невозможен.
в настоящее время *не* поддерживается.

## Установка

Вы можете установить бота классическим способом или через Docker.

### Классическая

Для начала установите [node-pty зависимости](https://github.com/Microsoft/node-pty#dependencies). Например, если вы используете Ubuntu/Debian:

~~~
sudo apt install -y make python build-essential
~~~

Прежде чем использовать это, вы должны были получить токен авторизации для своего бота, и знать идентификатор вашего аккаунта. Если вы не знаете, что это, проверьте [сообщение в блоге](https://jmendeth.com/blog/telegram-shell-bot/) для полной пошаговогой установки

~~~
git clone https://github.com/botgram/shell-bot.git && cd shell-bot
npm install
~~~

Для запуска бота:

~~~
node server
~~~

При первом запуске он задаст вам несколько вопросов и создаст файл конфигурации автоматически: `config.json`. Вы также можете сконфигурировать его вручную, смотрите `config.json`.

При запуске он будет выводить сообщение «Бот запущен.», когда он запущен и работает.
Для удобства вы можете написать BotFather и установить
список команд (смотреть содержимое `commands.txt`).

### Docker

Для начала скомпилируйте образ Docker:
~~~
docker build . -t shell-bot
~~~

Затем, чтобы запустить бота введите:

~~~
docker run -e authToken=123456:XXX-YYYY-ZZZZZZZZZZ -e owner=123456 shell-bot
~~~

## Авторизация

При первом запуске бот будет просто принимать сообщения от вашего аккаунта.
Это сделано из соображений безопасности: вы не хотите, чтобы произвольные люди выполняли команды на вашем компьютере!

Если вы хотите разрешить другому пользователю использовать бота, используйте `/token` и дайте этому пользователю персональную ссылку. Если вы хотите использовать этого бота в группе, `/token` даст вам сообщение для пересылки в группу

## Proxy server

shell-bot подчиняется переменной окружения https_proxy или all_proxy.
для использования прокси и поддерживает прокси HTTP/HTTPS/SOCKS4/SOCKS4A/SOCKS5.
Примеры:

~~~ bash
export https_proxy="http://168.63.76.32:3128"
node server

export https_proxy="socks://127.0.0.1:9050"
node server
~~~



[Telegram бота]: https://core.telegram.org/bots
[Botgram]: https://botgram.js.org
